<!-- dc6a1d68-52d9-42bc-8cc6-93e73fadd511 3b08353d-42ac-4474-a90d-6316dbd3eb44 -->
# LibreTranslate로 번역 시스템 전환

## 1. 패키지 설치

- 기존 `@vitalets/google-translate-api` 제거
- `libretranslate` 패키지 설치 또는 직접 API 호출 구현

## 2. 번역 API 수정

**파일**: `app/api/translate/route.ts`

### 변경사항

- Google Translate API 호출 부분을 LibreTranslate API로 교체
- LibreTranslate 공식 인스턴스 사용: `https://libretranslate.com/translate`
- 또는 자체 호스팅 인스턴스 사용 가능
```typescript
// LibreTranslate API 호출
const response = await fetch('https://libretranslate.com/translate', {
  method: 'POST',
  body: JSON.stringify({
    q: text,
    source: 'ko',
    target: 'en',
    format: 'text'
  }),
  headers: { 'Content-Type': 'application/json' }
});
```


### 장점

- 공식 무료 API로 "Too Many Requests" 오류 최소화
- API 키 불필요 (익명 사용 가능)
- 더 관대한 비율 제한
- 오픈소스로 자체 호스팅 가능

## 3. 재시도 로직 조정

- LibreTranslate는 더 안정적이므로 재시도 횟수 축소 가능
- 실패 시 간단한 한글-영어 사전으로 폴백 유지

## 4. 캐시 시스템 유지

- 기존 캐시 시스템 그대로 유지
- 중복 번역 방지로 API 호출 최소화

## 5. 에러 처리 개선

- LibreTranslate 특화 에러 처리
- 타임아웃, 네트워크 오류 등 처리

## 6. 테스트

- `http://localhost:3004/test-translate`에서 테스트
- 다양한 한글 텍스트로 번역 품질 확인
- 연속 요청 시 안정성 확인

## 구현 순서

1. 기존 패키지 제거 및 LibreTranslate API 호출 구현
2. 번역 API 코드 수정
3. 에러 처리 및 폴백 로직 조정
4. 테스트 및 검증

## 예상 결과

- Google Translate API 제한 문제 해결
- 안정적인 번역 서비스 제공
- 연쇄 실패 문제 해결
- 무료 사용 지속 가능

## 참고사항

- LibreTranslate는 Google Translate보다 번역 품질이 약간 낮을 수 있음
- 하지만 대부분의 일반적인 문장은 충분히 정확하게 번역됨
- 필요시 나중에 유료 API로 전환 가능 (구조는 동일)

### To-dos

- [ ] @vitalets/google-translate-api 패키지 설치
- [ ] 번역 API 엔드포인트 생성 (app/api/translate/route.ts)
- [ ] 타입 정의 업데이트 (originalPrompt 필드 추가)
- [ ] 디바운스 유틸리티 함수 추가
- [ ] PromptInput 컴포넌트에 자동 번역 기능 추가
- [ ] 이미지 생성 페이지에서 번역된 프롬프트 사용
- [ ] 한글 프롬프트로 이미지 생성 테스트